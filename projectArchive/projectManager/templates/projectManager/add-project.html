{% extends 'projectManager/base.html' %}

{% block content %}
<div class="container">
  <h1>Add New Project</h1>

  <form method="post">
    {% csrf_token %}

    <!-- Project Fields -->
    <div class="mb-3">
      <label for="{{ form.name.id_for_label }}" class="form-label">Project Name</label>
      {{ form.name }}
    </div>
    <div class="mb-3">
      <label for="{{ form.start_date.id_for_label }}" class="form-label">Start Date</label>
      {{ form.start_date }}
    </div>
    <div class="mb-3">
      <label for="{{ form.end_date.id_for_label }}" class="form-label">End Date</label>
      {{ form.end_date }}
    </div>
    <div class="mb-3">
      <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
      {{ form.description }}
    </div>
    <div class="mb-3">
      <label for="{{ form.email_pdf_url.id_for_label }}" class="form-label">Email PDF URL</label>
      {{ form.email_pdf_url }}
    </div>
    <div class="mb-3">
      <label for="{{ form.comparison_pdf_url.id_for_label }}" class="form-label">Comparison PDF URL</label>
      {{ form.comparison_pdf_url }}
    </div>

    <hr>

    <!-- Team Members -->
    <h2 class="mb-4">Team Members</h2>
    {{ team_member_formset.management_form }}
    <div id="team-member-forms">
      {% for form in team_member_formset %}
        <div class="dynamic-form team-members-form mb-4">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="form-heading">Team Member {{ forloop.counter }}</h3>
            <div>
              <button type="button" class="add-team_members btn btn-sm btn-success"><i class="bi bi-plus-lg fs-5"></i></button>
              <button type="button" class="remove-team_members btn btn-sm btn-danger"><i class="bi bi-x-lg fs-5"></i></button>
            </div>
          </div>          
          <div class="mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name</label>
            {{ form.first_name }}
          </div>
          <div class="mb-3">
            <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name</label>
            {{ form.last_name }}
          </div>
          <div class="mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
            {{ form.email }}
          </div>
        </div>
      {% endfor %}
    </div>

    <hr>

    <!-- Approvers -->
    <h2 class="mb-4">Approvers</h2>
    {{ approver_formset.management_form }}
    <div id="approver-forms">
      {% for form in approver_formset %}
        <div class="dynamic-form approvers-form mb-4">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="form-heading">Approver {{ forloop.counter }}</h3>
            <div>
              <button type="button" class="add-approvers btn btn-sm btn-success"><i class="bi bi-plus-lg fs-5"></i></button>
              <button type="button" class="remove-approvers btn btn-sm btn-danger"><i class="bi bi-x-lg fs-5"></i></button>
            </div>
          </div>
          <div class="mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name</label>
            {{ form.first_name }}
          </div>
          <div class="mb-3">
            <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name</label>
            {{ form.last_name }}
          </div>
          <div class="mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
            {{ form.email }}
          </div> 
        </div>
      {% endfor %}
    </div>

    <hr>

    <!-- Webpages -->
    <h2 class="mb-4">Webpages</h2>
    {{ webpage_formset.management_form }}
    <div id="webpage-forms">
      {% for form in webpage_formset %}
        <div class="dynamic-form webpages-form mb-4">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="form-heading">Webpage {{ forloop.counter }}</h3>
            <div>
              <button type="button" class="add-webpages btn btn-sm btn-success"><i class="bi bi-plus-lg fs-5"></i></button>
              <button type="button" class="remove-webpages btn btn-sm btn-danger"><i class="bi bi-x-lg fs-5"></i></button>
            </div>
          </div> 
          <div class="mb-3">
            <label for="{{ form.url.id_for_label }}" class="form-label">Webpage URL</label>
            {{ form.url }}
          </div>
        </div>
      {% endfor %}
    </div>

    <hr>

    <!-- Submit -->
    <button type="submit" class="btn btn-primary">Submit Project</button>
  </form>
</div>
{% endblock %}
